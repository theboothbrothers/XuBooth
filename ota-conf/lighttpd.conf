# ---------------------------------------
#  The Booth Brothers - OTA Config START
# ---------------------------------------

server.modules = (
	"mod_access",
	"mod_alias",
	"mod_compress",
 	"mod_redirect",
	"mod_fastcgi",
        "mod_rewrite"
)

server.document-root		= "<<<pwd>>>/ota"

server.upload-dirs		= ( "/var/cache/lighttpd/uploads" )
server.errorlog			= "/var/log/lighttpd/error.log"
server.pid-file			= "/var/run/lighttpd.pid"
server.username			= "www-data"
server.groupname		= "www-data"
server.port			= 80

index-file.names		= ( "index.php", "index.html" )
url.access-deny			= ( "~", ".inc" )
static-file.exclude-extensions	= ( ".php", ".pl", ".fcgi" )

compress.cache-dir		= "/var/cache/lighttpd/compress/"
compress.filetype		= ( "application/javascript", "text/css", "text/html", "text/plain" )

include_shell "/usr/share/lighttpd/create-mime.assign.pl"
include_shell "/usr/share/lighttpd/include-conf-enabled.pl"

# php5-cgi configuration
fastcgi.server = (
	".php" => (( 
		"bin-path" => "/usr/bin/php-cgi",
		"socket" => "/tmp/php.sock" 
	))
)

# 404 Handling
server.error-handler-404 = "/404.html" 

# SSL configuration
$SERVER["socket"] == "0.0.0.0:443" {
	ssl.engine	= "enable"
	ssl.pemfile	= "<<<pwd>>>/ota-conf/cert.pem"
	url.redirect = ( ".*" => "http://photobooth.ota" )
}

# -------------------------------------
#  The Booth Brothers - OTA Config End
# -------------------------------------
